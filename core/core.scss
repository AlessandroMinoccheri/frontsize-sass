// ========================================================================================================================================================================
// ==                                   ===================================================================================================================================
// ==                                   ===================================================================================================================================
// ==             FRONTSIZE             ===================================================================================================================================
// ==                                   ===================================================================================================================================
// ==                                   ===================================================================================================================================
// ========================================================================================================================================================================
// ========================================================================================================================================================================
// ==                                   ===================================================================================================================================
// ==             RESPONSIVE            ===================================================================================================================================
// ==                VARS               ===================================================================================================================================
// ==                                   ===================================================================================================================================
// ========================================================================================================================================================================

$to-hd-full-step:              ($hd-full-step - 1px);
$to-hd-ready-step:             ($hd-ready-step - 1px);
$to-tablet-landscape-step:     ($tablet-landscape-step - 1px);
$to-tablet-portrait-step:      ($tablet-portrait-step - 1px);
$to-smartphone-landscape-step: ($smartphone-landscape-step - 1px);
$to-smartphone-portrait-step:  ($smartphone-portrait-step - 1px);

// ========================================================================================================================================================================
// ==                                   ===================================================================================================================================
// ==               GLOBAL              ===================================================================================================================================
// ==             RESPONSIVE            ===================================================================================================================================
// ==           VIEWPORTS VARS          ===================================================================================================================================
// ==                                   ===================================================================================================================================
// ========================================================================================================================================================================
$display-retina-browser-compatible:     "only screen and (min-device-pixel-ratio: 2)";
$display-retina:                        "only screen and (-webkit-min-device-pixel-ratio: 2) and (aspect-ratio: 2), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 2dppx)";
$display-standard:                      "only screen and (-webkit-max-device-pixel-ratio: 1) and (aspect-ratio: 1), only screen and (-webkit-max-device-pixel-ratio: 1), only screen and (max--moz-device-pixel-ratio: 1), only screen and (-o-max-device-pixel-ratio: 1/11), only screen and (max-device-pixel-ratio: 1), only screen and (max-resolution: 1dppx)";

$only-smartphone-portrait:         "only screen and (min-width: 1px) and (max-width : #{$to-smartphone-landscape-step})";
$only-smartphone-landscape:        "only screen and (min-width: #{$smartphone-landscape-step}) and (max-width : #{$to-tablet-portrait-step})";
$only-tablet-portrait:             "only screen and (min-width: #{$tablet-portrait-step}) and (max-width : #{$to-tablet-landscape-step}), only print";
$only-tablet-landscape:            "only screen and (min-width: #{$tablet-landscape-step}) and (max-width : #{$to-hd-ready-step})";
$only-hd-ready:                    "only screen and (min-width: #{$hd-ready-step}) and (max-width : #{$to-hd-full-step})";
$only-hd-full:                     "only screen and (min-width: #{$hd-full-step})";

$from-smartphone-portrait:         "only screen and (min-width: 1px)";
$from-smartphone-landscape:        "only screen and (min-width: #{$smartphone-landscape-step})";
$from-tablet-portrait:             "only screen and (min-width: #{$tablet-portrait-step}), only print";
$from-tablet-landscape:            "only screen and (min-width: #{$tablet-landscape-step})";
$from-hd-ready:                    "only screen and (min-width: #{$hd-ready-step})";
$from-hd-full:                     $only-hd-full;

$only-smartphone:                  "only screen and (min-width: 1px) and (max-width : #{$to-tablet-portrait-step})";
$only-tablet:                      "only screen and (min-width: #{$tablet-portrait-step}) and (max-width : #{$to-hd-ready-step}), only print";
$only-hd:                          $from-hd-ready;

$till-smartphone-portrait:         "only screen and (max-width: #{$to-smartphone-portrait-step})"; // useless!
$till-smartphone-landscape:        "only screen and (max-width: #{$to-smartphone-landscape-step})";
$till-tablet-portrait:             "only screen and (max-width: #{$to-tablet-portrait-step})";
$till-tablet-landscape:            "only screen and (max-width: #{$to-tablet-landscape-step}), only print";
$till-hd-ready:                    "only screen and (max-width: #{$to-hd-ready-step})";
$till-hd-full:                     "only screen and (max-width: #{$to-hd-full-step})";

$retina-from-smartphone-portrait:  "#{$from-smartphone-portrait},	#{$display-retina-browser-compatible}"; // this woking only with @display-retina-browser-compatible
$retina-from-smartphone-landscape: "#{$from-smartphone-landscape},	#{$display-retina-browser-compatible}"; // this woking only with @display-retina-browser-compatible
$retina-from-tablet-portrait:      "#{$from-tablet-portrait},		#{$display-retina-browser-compatible}"; // this woking only with @display-retina-browser-compatible
$retina-from-tablet-landscape:     "#{$from-tablet-landscape},		#{$display-retina-browser-compatible}"; // this woking only with @display-retina-browser-compatible
$retina-from-hd-ready:             "#{$from-hd-ready},				#{$display-retina-browser-compatible}"; // this woking only with @display-retina-browser-compatible
$retina-from-hd-full:              "#{$from-hd-full},				#{$display-retina-browser-compatible}"; // this woking only with @display-retina-browser-compatible

$print-viewport: $only-tablet-portrait;

// ========================================================================================================================================================================
// ==                                   ===================================================================================================================================
// ==             FRONTSIZE             ===================================================================================================================================
// ==             INTERNAL              ===================================================================================================================================
// ==              MIXINS               ===================================================================================================================================
// ==                                   ===================================================================================================================================
// ========================================================================================================================================================================

@mixin addColumnSet($prefix:col-, $totalSteps:12, $viewTotalColumns:true, $columnsSeparator:-of-) {
	$startIndex: $totalSteps;
	@include loopColumnSet($totalSteps, $prefix, $startIndex, $viewTotalColumns, $columnsSeparator, "");
}

@mixin addFillToColumnSet($prefix, $totalSteps, $fillViewport:"smartphone-landscape", $viewTotalColumns:true, $columnsSeparator:-of-) {
	$startIndex: $totalSteps;
	@include loopColumnSetFill($prefix, $totalSteps, $fillViewport, $startIndex, $viewTotalColumns, $columnsSeparator);
}

@mixin preventSmartphoneColumnSet($prefix:col-, $totalSteps:12, $viewTotalColumns:true, $columnsSeparator:-of-) {
	$startIndex: $totalSteps;
	@media #{$till-tablet-portrait} {
		// Smartphone landscape
		@include loopSmartphoneColumnSet($prefix, $totalSteps, $startIndex, $viewTotalColumns, $columnsSeparator);
	}
}

@mixin loopColumnSet ($total, $prefix, $index, $viewTotalColumns, $columnsSeparator, $prevRule:""){
	$nextRule:"";
	@if $viewTotalColumns == true{
		@while $index >= 0{
	  		@if $index == $total{
	  			$nextRule: ".#{$prefix}#{$index}#{$columnsSeparator}#{$total}";
	  		}
	  		@else{
	  			@if $index > 0{
	  				$nextRule: $nextRule + ", .#{$prefix}#{$index}#{$columnsSeparator}#{$total}";
	  			}
	  		}

	  		@if $index > 0{
	  			.#{$prefix}#{$index}#{$columnsSeparator}#{$total} {
					@include setColumnStep($index, $total);
				}
	  		}

	  		@if $index == 0{
	  			#{$nextRule} {
					@include setColumnBehavior();
					@include box-sizing(border-box);
				}
	  		}
	  		
	  		$index: $index - 1;
		}
	}
	@else{
		@while $index >= 0{
	  		@if $index == $total{
	  			$nextRule: ".#{$prefix}#{$index}";
	  		}
	  		@else {
	  			@if $index > 0{
	  				$nextRule: $nextRule + ", .#{$prefix}#{$index}";
	  			}
	  		}

	  		@if $index > 0{
	  			.#{$prefix}#{$index}#{$columnsSeparator}#{$total} {
					@include setColumnStep($index, $total);
				}
	  		}

	  		@if $index == 0{
	  			#{$nextRule} {
					@include setColumnBehavior();
					@include box-sizing(border-box);
				}
	  		}
	  		
	  		$index: $index - 1;
		}
	}
} 

@mixin loopSmartphoneColumnSet($prefix, $total, $index, $viewTotalColumns, $columnsSeparator){
	@while $index >= 0{
		 @if $index > 0 and $viewTotalColumns == true {
			.#{$prefix}#{$index}#{$columnsSeparator}#{$total} {
				@include setColumnStep($index, $total);
			}
		}
		@if $index > 0 and $viewTotalColumns == false {
			.#{$prefix}#{$index} {
				@include setColumnStep($index, $total);
			}
		}
		$index: $index - 1;
	}
}

@mixin loopColumnSetFill($prefix, $total, $fill, $index, $viewTotalColumns, $columnsSeparator, $prevRule:""){
	$nextRule:"";
	@while $index >= 0{
		@if $index == $total and $viewTotalColumns == true{
			$nextRule: ".#{$prefix}#{$index}#{$columnsSeparator}#{$total}";
		}
		@if $index == $total and $viewTotalColumns == false{
			$nextRule: ".#{$prefix}#{$index}";
		}

		@if $index > 0 and $index < $total and $viewTotalColumns == true{
			$nextRule: $nextRule + ", .#{$prefix}#{$index}#{$columnsSeparator}#{$total}";
		}

		@if $index > 0 and $index < $total and $viewTotalColumns == false{
			$nextRule: $nextRule + ", .#{$prefix}#{$index}";
		}

		@if $fill == "tablet-landscape" and $index == 0{
			@media #{$till-hd-ready} {
				#{$nextRule} {
					width: 100%;
				}
			}
		}

		@if $fill == "tablet-portrait" and $index == 0{
			@media #{$till-tablet-landscape} {
				#{$nextRule} {
					width: 100%;
				}
			}
		}

		@if $fill == "smartphone-landscape" and $index == 0{
			@media #{$till-tablet-portrait} {
				#{$nextRule} {
					width: 100%;
				}
			}
		}

		@if $fill == "smartphone-portrait" and $index == 0{
			@media #{$till-smartphone-landscape} {
				#{$nextRule} {
					width: 100%;
				}
			}
		}

		$index: $index - 1;
	}
}

@mixin setColumns($columns) {
	width:(100%/$columns);
	&:nth-child(#{$columns}n+1) {clear:both;}
}

@mixin setColumnStep($step, $columns) {
	width:((100% * $step)/$columns);
}

@mixin setColumnBehavior($usePosition:true) {
	padding-left: $horizontal-padding;
	padding-right: $horizontal-padding;
	padding-bottom: $vertical-padding;
	float: left;
	@if $usePosition == true {
		position: relative;
	}
}
